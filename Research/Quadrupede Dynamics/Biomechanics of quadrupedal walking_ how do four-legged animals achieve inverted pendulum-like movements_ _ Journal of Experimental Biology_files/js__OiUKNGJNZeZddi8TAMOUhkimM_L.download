(function(i){Drupal.behaviors.highwireFiguresMarkupProcessor={attach:function(e,o){i('body').bind('highwireResponsiveLayoutTransition',function(t,e){var o=Drupal.highwireResponsive.getMobileLayouts();if(e.from!=e.to){if(o.indexOf(e.to)!=-1){i('#cboxTitle').addClass('force-hide')}
else{i('#cboxTitle').removeClass('force-hide')}}
else if(o.indexOf(e.to)!=-1){i('#cboxTitle').addClass('force-hide')}});i('a.fragment-images.colorbox-load',e).once('highwireFiguresMarkupProcessor',function(){i(this,e).each(function(){var e=i(this),t=!1;if(e.is('[data-figure-caption]')){t=e.data('figure-caption')};cbsettings=i.extend(o.colorbox,{'preloading':!1,title:t});e.colorbox(cbsettings)})})}}})(jQuery);(function(e){Drupal.behaviors.highwire_openurl={attach:function(r,i){if(e('.cit-ref-sprinkles-open-url').length>0){var n='';if('apath' in Drupal.settings.highwire){n='?apath='+encodeURIComponent(Drupal.settings.highwire.apath)};e.getJSON(Drupal.settings.basePath+'highwire/openurl_branding'+n,function(r){if(r){Drupal.settings.highwireOpenurl=r;if(r.base_url===null){e('.cit-ref-sprinkles-open-url').hide()}
else{e('.cit-ref-sprinkles-open-url').each(function(){var r=e(this);r.once('insertImage',function(){var n=Drupal.settings.highwireOpenurl,e=r.attr('href'),i='',t='';if(e.indexOf('{openurl}')!=-1){i='{openurl}';e=decodeURIComponent(e);e=decodeURIComponent(e)}
else if(e.indexOf('urn:openurl:')!=-1){i='urn:openurl:';t='?'};e=e.replace('?query=','?');e=e.replace(i,Drupal.settings.basePath+'highwire/openurl'+t);var a=e+'&redirect_url='+n.base_url;r.attr('href',a.replace(/\+/g,' '));r.text(n.link_text);if(n.image){r.prepend('<img src="'+n.image+'"/>')}})})}}})}}}})(jQuery);(function(i){Drupal.behaviors.highwire_google_scholar={attach:function(t,e){if(i('.cit-extra').length>0){i('.cit-list .ref-cit').once('google_scholar_link',function(){i(this).each(function(){var e='',n=0;i(this).find('.cit-auth').each(function(){var l=i(this).find('.cit-name-given-names')!=='undefined'?i(this).find('.cit-name-given-names').html():'',t=i(this).find('.cit-name-surname')!=='undefined'?i(this).find('.cit-name-surname').html():'';if(l||t){e+='&author['+n+']='+(l?l:'')+(t?'+'+t:'')}
else if(i(this).hasClass('cit-collab')){e+='&author['+n+']='+i(this).text()};n++});var s=i(this).find('.cit-article-title').length>0?i(this).find('.cit-article-title').text():!1,a=i(this).find('.cit-pub-date').length>0?i(this).find('.cit-pub-date').html():!1;if(s!==!1&&a!==!1&&e!==''){var l={gsAuthor:e,gsTitle:s.replace(/< *img[^>]*src *= *["']?([^"']*)"\/>/i,'').replace(/\ /g,'+'),publicationYear:a};extraFields={journal:i(this).find('.cit-jnl-abbrev').length>0?i(this).find('.cit-jnl-abbrev').html():!1,volume:i(this).find('.cit-vol').length>0?i(this).find('.cit-vol').html():!1,issn:i(this).find('.cit-issn').length>0?i(this).find('.cit-issn').html():!1,isbn:i(this).find('.cit-isbn').length>0?i(this).find('.cit-isbn').html():!1,doi:i(this).find('.cit-doi').length>0?i(this).find('.cit-doi').html():!1,pages:(i(this).find('.cit-fpage').length>0&&i(this).find('.cit-lpage').length>0)?i(this).find('.cit-fpage').html()+'-'+i(this).find('.cit-lpage').html():!1};extraFieldString='';i.each(extraFields,function(t,i){if(i!==!1){extraFieldString+='&'+t+'='+i.replace(/\ /g,'+')}});var h='<a href="/lookup/google-scholar?link_type=googlescholar&gs_type=article'+l.gsAuthor+'&title='+l.gsTitle+'&publication_year='+l.publicationYear+extraFieldString+'" target="_blank" class="cit-ref-sprinkles cit-ref-sprinkles-google-scholar cit-ref-sprinkles-google-scholar"><span>Google Scholar</span></a>';i(this,t).once('custom-js',function(){i(this).find('.cit-extra').append(h)})}})})}}}})(jQuery);;var bodyTags=document.getElementsByTagName('body'),body=bodyTags[0],trendmd_instances=Drupal.settings.highwire.trendmd;for(var id in trendmd_instances){if(trendmd_instances.hasOwnProperty(id)){var s=document.createElement('script');s.type='text/javascript';s.src='//js.trendmd.com/trendmd.min.js';s.defer='defer';s.setAttribute('data-trendmdconfig',trendmd_instances[id]);body.insertBefore(s,body.lastChild.nextSibling)}};(function(a){Drupal.behaviors.highwire_user_salutation={attach:function(e,t){a('.highwire-user-message',e).once('highwire-user-message-once',function(){var t=[],e=a(this);e.children().each(function(){var e=a(this),i=e.data('id-type');t.push({name:i,data:e.data('identity')})});a.ajax({url:'/highwire/salutation',type:'POST',cache:!1,dataType:'json',data:{'salutation':t},success:function(t){for(var i in t){e.find('.'+i).html(unescape(t[i]))};e.children().each(function(){var t=a(this);if(t.text().length>0&&t.prevAll().text().length>0){t.before('<span class="highwire-user-msg-separator">'+e.data('separator')+'</span>')}})}})})}}}(jQuery));